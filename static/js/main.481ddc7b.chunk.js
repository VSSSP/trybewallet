(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,n){e.exports=n(45)},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),l=n.n(c),o=n(8),i=n(24),u=n(2),s=n(16),d=n(3),E=n(4),p=n(12),h=n(6),m=n(5),b={LOGIN_INFO:"LOGIN_INFO",WALLET_INFO:"WALLET_INFO",GET_WALLET_API_SUCCESS:"GET_WALLET_API_SUCCESS",GET_WALLET_API_FAILED:"GET_WALLET_API_FAILED",LOADING_API:"LOADING_API",GET_EXPENSES:"GET_EXPENSES",DELETE_EXPENSE:"DELETE_EXPENSE",EDIT_EXPENSE:"EDIT_EXPENSE",SET_NEW_EXPENSE:"SET_NEW_EXPENSE",LOAD_EDITED_EXPENSE:"LOAD_EDITED_EXPENSE"},f=b.GET_WALLET_API_SUCCESS,O=b.GET_WALLET_API_FAILED,v=b.GET_EXPENSES,y=b.LOGIN_INFO,j=b.DELETE_EXPENSE,g=b.EDIT_EXPENSE,k=b.SET_NEW_EXPENSE,C=function(e){return{type:O,payload:e}},x=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={email:"",senha:""},e.handleChange=e.handleChange.bind(Object(p.a)(e)),e.handleClick=e.handleClick.bind(Object(p.a)(e)),e}return Object(E.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(s.a)({},n,a))}},{key:"enableButton",value:function(){return this.state.senha.length<6||!this.emailValidation()}},{key:"emailValidation",value:function(){var e=this.state.email;return/^[a-z0-9.]+@[a-z0-9]+\.[a-z]+(\.[a-z]+)?$/i.test(e)}},{key:"handleClick",value:function(){(0,this.props.setLoginToStore)(this.state),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.senha;return e.redirect?r.a.createElement(u.a,{to:"/carteira"}):r.a.createElement("div",null,r.a.createElement("input",{type:"email",name:"email",value:t,placeholder:"e-mail","data-testid":"email-input",onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"senha",value:n,placeholder:"senha","data-testid":"password-input",onChange:this.handleChange}),r.a.createElement("button",{disabled:this.enableButton(),type:"button",onClick:this.handleClick},"Entrar"))}}]),n}(a.Component),S=Object(o.b)(null,(function(e){return{setLoginToStore:function(t){return e({type:y,payload:t})}}}))(x),_=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleClick=e.handleClick.bind(Object(p.a)(e)),e.handleEditButtonClick=e.handleEditButtonClick.bind(Object(p.a)(e)),e}return Object(E.a)(n,[{key:"ask",value:function(e){var t=e.exchangeRates[e.currency].ask;return parseFloat(t).toFixed(2)}},{key:"currencyName",value:function(e){return e.exchangeRates[e.currency].name.split("/")[0]}},{key:"convertedExpense",value:function(e){var t=e.exchangeRates[e.currency].ask;return parseFloat(e.value*t).toFixed(2)}},{key:"handleClick",value:function(e){var t=e.target.id;(0,this.props.deleteExpenseFromStore)(Number(t))}},{key:"handleEditButtonClick",value:function(e){var t=e.target.id;(0,this.props.editExpenseFromStore)(Number(t))}},{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement(r.a.Fragment,null,t.map((function(t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,t.value),r.a.createElement("td",null,e.ask(t)),r.a.createElement("td",null,e.currencyName(t)),r.a.createElement("td",null,e.convertedExpense(t)),r.a.createElement("td",null,"Real"),r.a.createElement("button",{id:t.id,type:"button","data-testid":"delete-btn",onClick:e.handleClick},"Deletar"),r.a.createElement("button",{id:t.id,type:"button","data-testid":"edit-btn",onClick:e.handleEditButtonClick},"Editar"))})))}}]),n}(a.Component),T=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpenseFromStore:function(t){return e({type:j,payload:t})},editExpenseFromStore:function(t){return e({type:g,payload:t})}}}))(_),I=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement("tr",null,["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"].map((function(e){return r.a.createElement("th",{key:e},e)})))}}]),n}(a.Component),N=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement("table",null,r.a.createElement(I,null),r.a.createElement(T,null))}}]),n}(a.Component),L=n(7),w=n(17),F=n.n(w),A=n(21),D=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.tags;return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement("option",{key:e},e)})))}}]),n}(a.Component),P=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.payMethods;return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement("option",{key:e},e)})))}}]),n}(a.Component),X=function(){return function(){var e=Object(A.a)(F.a.mark((function e(t){var n,a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("xabl\xe9u");case 6:return e.next=8,n.json();case 8:a=e.sent,r=Object.keys(a).filter((function(e){return"USDT"!==e})),t({type:f,payload:r}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t(C(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},B=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getCurrencies)()}},{key:"render",value:function(){var e=this.props.currencies;return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement("option",{key:e},e)})))}}]),n}(a.Component),G=Object(o.b)((function(e){return{currencies:e.wallet.currencies}}),(function(e){return{getCurrencies:function(){return e(X())}}}))(B),W=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={value:"0",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",exchangeRates:{}},e.handleChange=e.handleChange.bind(Object(p.a)(e)),e.handleClick=e.handleClick.bind(Object(p.a)(e)),e.handleEditExpenseButton=e.handleEditExpenseButton.bind(Object(p.a)(e)),e}return Object(E.a)(n,[{key:"handleClick",value:function(){var e=Object(A.a)(F.a.mark((function e(){var t,n,a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.sendExpensesToStore,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,this.setState({exchangeRates:a}),t(this.state);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEditExpenseButton",value:function(){var e=this.props,t=e.sendEditedExpenseToStore,n=e.expenses,a=e.selectedId;t(this.state),t(Object(L.a)(Object(L.a)({},this.state),{},{exchangeRates:n[a].exchangeRates}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(s.a)({},n,a))}},{key:"addExpenseButton",value:function(){return r.a.createElement("button",{type:"button",onClick:this.handleClick},"Adicionar despesa")}},{key:"editExpenseButton",value:function(){return r.a.createElement("button",{type:"button",onClick:this.handleEditExpenseButton},"Editar despesa")}},{key:"render",value:function(){var e=this.props.editing;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"valor"},"Valor:",r.a.createElement("input",{type:"text",name:"value",id:"valor",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"descricao"},"Descri\xe7\xe3o:",r.a.createElement("textarea",{name:"description",id:"descricao",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"moeda"},"Moeda:",r.a.createElement("select",{id:"moeda",onChange:this.handleChange,name:"currency"},r.a.createElement(G,null))),r.a.createElement("label",{htmlFor:"m\xe9todo de pagamento"},"M\xe9todo de pagamento:",r.a.createElement("select",{id:"m\xe9todo de pagamento",onChange:this.handleChange,name:"method"},r.a.createElement(P,{payMethods:["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"]}))),r.a.createElement("label",{htmlFor:"tag"},"Tag:",r.a.createElement("select",{id:"tag",onChange:this.handleChange,name:"tag"},r.a.createElement(D,{tags:["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"]}))),e?this.editExpenseButton():this.addExpenseButton())}}]),n}(a.Component),R=Object(o.b)((function(e){return{editing:e.wallet.editing,expenses:e.wallet.expenses,selectedId:e.wallet.selectedId}}),(function(e){return{sendExpensesToStore:function(t){return e({type:v,payload:t})},sendEditedExpenseToStore:function(t){return e({type:k,payload:t})}}}))(W),M=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"sumExpenses",value:function(){return this.props.expenses.reduce((function(e,t){var n=t.exchangeRates[t.currency].ask;return e+parseFloat(t.value*n)}),0)}},{key:"render",value:function(){return r.a.createElement("p",{"data-testid":"total-field"},this.sumExpenses())}}]),n}(a.Component),U=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),null)(M),z=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.getUserFromStore;return r.a.createElement("header",null,r.a.createElement("p",{"data-testid":"email-field"},e),r.a.createElement(U,null),r.a.createElement("p",{"data-testid":"header-currency-field"},"BRL"))}}]),n}(a.Component),V=Object(o.b)((function(e){return{getUserFromStore:e.user.email}}),null)(z),J=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null),r.a.createElement("div",null,"TrybeWallet"),r.a.createElement(R,null),r.a.createElement(N,null))}}]),n}(r.a.Component);var $=function(){return r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:S}),r.a.createElement(u.b,{path:"/carteira",component:J}))};n(44),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=n(14),H=n(31),K=n(32),Q={email:"",password:""},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.LOGIN_INFO:return Object(L.a)(Object(L.a)({},e),{},{email:t.payload.email,password:t.payload.senha});default:return e}},Z=n(22),ee=b.GET_WALLET_API_SUCCESS,te=b.GET_EXPENSES,ne=b.DELETE_EXPENSE,ae=b.EDIT_EXPENSE,re=b.SET_NEW_EXPENSE,ce={currencies:[],expenses:[],error:"",editing:!1,selectedId:null},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(L.a)(Object(L.a)({},e),{},{currencies:t.payload});case te:return t.payload=Object(L.a)({id:e.expenses.length},t.payload),e.expenses=[].concat(Object(Z.a)(e.expenses),[t.payload]),Object(L.a)({},e);case ne:return Object(L.a)(Object(L.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.payload}))});case ae:return Object(L.a)(Object(L.a)({},e),{},{editing:!0,selectedId:t.payload});case re:return t.payload=Object(L.a)({id:e.selectedId},t.payload),Object(L.a)(Object(L.a)({},e),{},{expenses:e.expenses.reduce((function(n,a){return a.id===e.selectedId?[].concat(Object(Z.a)(n),[t.payload]):[].concat(Object(Z.a)(n),[a])}),[]),editing:!1});default:return e}},oe=Object(q.combineReducers)({user:Y,wallet:le}),ie=Object(q.createStore)(oe,Object(H.composeWithDevTools)(Object(q.applyMiddleware)(K.a)));l.a.render(r.a.createElement(o.a,{store:ie},r.a.createElement(i.a,{basename:"/trybewallet"},r.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.481ddc7b.chunk.js.map