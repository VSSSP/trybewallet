(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{31:function(e,t,n){e.exports=n.p+"static/media/wallet.4a994f72.png"},34:function(e,t,n){e.exports=n(47)},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),l=n.n(c),o=n(8),i=n(24),u=n(2),s=n(16),d=n(3),E=n(4),p=n(12),h=n(6),m=n(5),b={LOGIN_INFO:"LOGIN_INFO",WALLET_INFO:"WALLET_INFO",GET_WALLET_API_SUCCESS:"GET_WALLET_API_SUCCESS",GET_WALLET_API_FAILED:"GET_WALLET_API_FAILED",LOADING_API:"LOADING_API",GET_EXPENSES:"GET_EXPENSES",DELETE_EXPENSE:"DELETE_EXPENSE",EDIT_EXPENSE:"EDIT_EXPENSE",SET_NEW_EXPENSE:"SET_NEW_EXPENSE",LOAD_EDITED_EXPENSE:"LOAD_EDITED_EXPENSE"},f=b.GET_WALLET_API_SUCCESS,v=b.GET_WALLET_API_FAILED,O=b.GET_EXPENSES,y=b.LOGIN_INFO,j=b.DELETE_EXPENSE,g=b.EDIT_EXPENSE,k=b.SET_NEW_EXPENSE,C=function(e){return{type:v,payload:e}},x=n(31),S=n.n(x),_=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={email:"",senha:""},e.handleChange=e.handleChange.bind(Object(p.a)(e)),e.handleClick=e.handleClick.bind(Object(p.a)(e)),e}return Object(E.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(s.a)({},n,a))}},{key:"enableButton",value:function(){return this.state.senha.length<6||!this.emailValidation()}},{key:"emailValidation",value:function(){var e=this.state.email;return/^[a-z0-9.]+@[a-z0-9]+\.[a-z]+(\.[a-z]+)?$/i.test(e)}},{key:"handleClick",value:function(){(0,this.props.setLoginToStore)(this.state),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.senha;return e.redirect?r.a.createElement(u.a,{to:"/carteira"}):r.a.createElement("div",{class:"wrapper fadeInDown"},r.a.createElement("div",{id:"formContent"},r.a.createElement("div",{class:"fadeIn first"},r.a.createElement("img",{src:S.a,id:"icon",alt:"User Icon"})),r.a.createElement("form",null,r.a.createElement("input",{type:"email",name:"email",value:t,placeholder:"e-mail","data-testid":"email-input",onChange:this.handleChange,className:"fadeIn second login-input"}),r.a.createElement("input",{type:"password",name:"senha",value:n,placeholder:"senha","data-testid":"password-input",onChange:this.handleChange,className:"fadeIn third login-input"}),r.a.createElement("button",{disabled:this.enableButton(),type:"button",onClick:this.handleClick,className:"fadeIn fourth login-button"},"Entrar"))))}}]),n}(a.Component),T=Object(o.b)(null,(function(e){return{setLoginToStore:function(t){return e({type:y,payload:t})}}}))(_),I=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleClick=e.handleClick.bind(Object(p.a)(e)),e.handleEditButtonClick=e.handleEditButtonClick.bind(Object(p.a)(e)),e}return Object(E.a)(n,[{key:"ask",value:function(e){var t=e.exchangeRates[e.currency].ask;return parseFloat(t).toFixed(2)}},{key:"currencyName",value:function(e){return e.exchangeRates[e.currency].name.split("/")[0]}},{key:"convertedExpense",value:function(e){var t=e.exchangeRates[e.currency].ask;return parseFloat(e.value*t).toFixed(2)}},{key:"handleClick",value:function(e){var t=e.target.id;(0,this.props.deleteExpenseFromStore)(Number(t))}},{key:"handleEditButtonClick",value:function(e){var t=e.target.id;(0,this.props.editExpenseFromStore)(Number(t))}},{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement(r.a.Fragment,null,t.map((function(t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,t.value),r.a.createElement("td",null,e.ask(t)),r.a.createElement("td",null,e.currencyName(t)),r.a.createElement("td",null,e.convertedExpense(t)),r.a.createElement("td",null,"Real"),r.a.createElement("button",{id:t.id,type:"button","data-testid":"delete-btn",onClick:e.handleClick},"Deletar"),r.a.createElement("button",{id:t.id,type:"button","data-testid":"edit-btn",onClick:e.handleEditButtonClick},"Editar"))})))}}]),n}(a.Component),N=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpenseFromStore:function(t){return e({type:j,payload:t})},editExpenseFromStore:function(t){return e({type:g,payload:t})}}}))(I),L=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement("tr",null,["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"].map((function(e){return r.a.createElement("th",{key:e},e)})))}}]),n}(a.Component),w=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement("table",null,r.a.createElement(L,null),r.a.createElement(N,null))}}]),n}(a.Component),F=n(7),D=n(17),A=n.n(D),P=n(21),X=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.tags;return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement("option",{key:e},e)})))}}]),n}(a.Component),B=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.payMethods;return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement("option",{key:e},e)})))}}]),n}(a.Component),G=function(){return function(){var e=Object(P.a)(A.a.mark((function e(t){var n,a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("xabl\xe9u");case 6:return e.next=8,n.json();case 8:a=e.sent,r=Object.keys(a).filter((function(e){return"USDT"!==e})),t({type:f,payload:r}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t(C(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},W=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getCurrencies)()}},{key:"render",value:function(){var e=this.props.currencies;return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement("option",{key:e},e)})))}}]),n}(a.Component),R=Object(o.b)((function(e){return{currencies:e.wallet.currencies}}),(function(e){return{getCurrencies:function(){return e(G())}}}))(W),M=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state={value:"0",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",exchangeRates:{}},e.handleChange=e.handleChange.bind(Object(p.a)(e)),e.handleClick=e.handleClick.bind(Object(p.a)(e)),e.handleEditExpenseButton=e.handleEditExpenseButton.bind(Object(p.a)(e)),e}return Object(E.a)(n,[{key:"handleClick",value:function(){var e=Object(P.a)(A.a.mark((function e(){var t,n,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.sendExpensesToStore,e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,this.setState({exchangeRates:a}),t(this.state);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEditExpenseButton",value:function(){var e=this.props,t=e.sendEditedExpenseToStore,n=e.expenses,a=e.selectedId;t(this.state),t(Object(F.a)(Object(F.a)({},this.state),{},{exchangeRates:n[a].exchangeRates}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(s.a)({},n,a))}},{key:"addExpenseButton",value:function(){return r.a.createElement("button",{type:"button",onClick:this.handleClick},"Adicionar despesa")}},{key:"editExpenseButton",value:function(){return r.a.createElement("button",{type:"button",onClick:this.handleEditExpenseButton},"Editar despesa")}},{key:"render",value:function(){var e=this.props.editing;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"valor"},"Valor:",r.a.createElement("input",{type:"text",name:"value",id:"valor",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"descricao"},"Descri\xe7\xe3o:",r.a.createElement("textarea",{name:"description",id:"descricao",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"moeda"},"Moeda:",r.a.createElement("select",{id:"moeda",onChange:this.handleChange,name:"currency"},r.a.createElement(R,null))),r.a.createElement("label",{htmlFor:"m\xe9todo de pagamento"},"M\xe9todo de pagamento:",r.a.createElement("select",{id:"m\xe9todo de pagamento",onChange:this.handleChange,name:"method"},r.a.createElement(B,{payMethods:["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"]}))),r.a.createElement("label",{htmlFor:"tag"},"Tag:",r.a.createElement("select",{id:"tag",onChange:this.handleChange,name:"tag"},r.a.createElement(X,{tags:["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"]}))),e?this.editExpenseButton():this.addExpenseButton())}}]),n}(a.Component),U=Object(o.b)((function(e){return{editing:e.wallet.editing,expenses:e.wallet.expenses,selectedId:e.wallet.selectedId}}),(function(e){return{sendExpensesToStore:function(t){return e({type:O,payload:t})},sendEditedExpenseToStore:function(t){return e({type:k,payload:t})}}}))(M),z=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"sumExpenses",value:function(){return this.props.expenses.reduce((function(e,t){var n=t.exchangeRates[t.currency].ask;return e+parseFloat(t.value*n)}),0)}},{key:"render",value:function(){return r.a.createElement("p",{"data-testid":"total-field"},this.sumExpenses())}}]),n}(a.Component),V=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),null)(z),J=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.getUserFromStore;return r.a.createElement("header",null,r.a.createElement("p",{"data-testid":"email-field"},e),r.a.createElement(V,null),r.a.createElement("p",{"data-testid":"header-currency-field"},"BRL"))}}]),n}(a.Component),$=Object(o.b)((function(e){return{getUserFromStore:e.user.email}}),null)(J),q=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement($,null),r.a.createElement("div",null,"TrybeWallet"),r.a.createElement(U,null),r.a.createElement(w,null))}}]),n}(r.a.Component);n(45);var H=function(){return r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:T}),r.a.createElement(u.b,{path:"/carteira",component:q}))};n(46),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=n(14),Q=n(32),Y=n(33),Z={email:"",password:""},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.LOGIN_INFO:return Object(F.a)(Object(F.a)({},e),{},{email:t.payload.email,password:t.payload.senha});default:return e}},te=n(22),ne=b.GET_WALLET_API_SUCCESS,ae=b.GET_EXPENSES,re=b.DELETE_EXPENSE,ce=b.EDIT_EXPENSE,le=b.SET_NEW_EXPENSE,oe={currencies:[],expenses:[],error:"",editing:!1,selectedId:null},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return Object(F.a)(Object(F.a)({},e),{},{currencies:t.payload});case ae:return t.payload=Object(F.a)({id:e.expenses.length},t.payload),e.expenses=[].concat(Object(te.a)(e.expenses),[t.payload]),Object(F.a)({},e);case re:return Object(F.a)(Object(F.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.payload}))});case ce:return Object(F.a)(Object(F.a)({},e),{},{editing:!0,selectedId:t.payload});case le:return t.payload=Object(F.a)({id:e.selectedId},t.payload),Object(F.a)(Object(F.a)({},e),{},{expenses:e.expenses.reduce((function(n,a){return a.id===e.selectedId?[].concat(Object(te.a)(n),[t.payload]):[].concat(Object(te.a)(n),[a])}),[]),editing:!1});default:return e}},ue=Object(K.combineReducers)({user:ee,wallet:ie}),se=Object(K.createStore)(ue,Object(Q.composeWithDevTools)(Object(K.applyMiddleware)(Y.a)));l.a.render(r.a.createElement(o.a,{store:se},r.a.createElement(i.a,{basename:"/trybewallet"},r.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.fdd7e65c.chunk.js.map